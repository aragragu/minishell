
////////////////////////////////////////////////////////////////////////////
export -HOLA=hello     -> exit_status = 1 but it should be 2
////////////////////////////////////////////////////////////////////////////
➜ minishell💀$ export HO!LA=hello
export: `HO!LA=hello': not a valid identifier
➜ minishell💀$ echo $?
1
////////////////////////////////////////////////////////////////////////////
➜ minishell💀$ expoexport HOLA=" bonjour hey "
➜ minishell💀$ echo wesh"$HOLA" | cat -e
wesh bonjour hey $
➜ minishell💀$ export HOLA=" bonjour hey "
➜ minishell💀$ echo wesh""$HOLA.
weshbonjour hey.
➜ minishell💀$ export HOLA=" bonjour hey "
➜ minishell💀$  echo wesh$""HOLA.
weshLA.
➜ minishell💀$ echo wesh$""HOLA
weshLA
////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////

also i found a double free from ft_export_norm.c in line 55
wslt l commadn 496

////////////////////////////////////////////////////////////////////////////
Test  41: ❌ cd 123123 
mini exit code = 0
bash exit code = 1
Test  44: ❌ exit +100 
mini exit code = 255
bash exit code = 100
mini error = ( numeric arg required)
bash error = ()
Test  45: ❌ exit "+100" 
mini exit code = 255
bash exit code = 100
mini error = ( numeric arg required)
bash error = ()
Test  46: ❌ exit +"100" 
mini exit code = 255
bash exit code = 100
mini error = ( numeric arg required)
bash error = ()
Test  47: ❌ exit -100 
mini exit code = 0
bash exit code = 156
Test  48: ❌ exit "-100" 
mini exit code = 0
bash exit code = 156
Test  49: ❌ exit -"100" 
mini exit code = 0
bash exit code = 156
////////////////////////////////////////////////////////////////////////////

Test  59: ❌ ls >>./test_files/invalid_permission 
mini exit code = 13
bash exit code = 1
Test  60: ❌ ls >>./test_files/invalid_permission >>./outfiles/outfile01 
mini exit code = 13
bash exit code = 1
Test  61: ❌ ls >>./outfiles/outfile01 >>./test_files/invalid_permission 
mini exit code = 13
bash exit code = 1
Test  62: ❌ ls >./outfiles/outfile01 >>./test_files/invalid_permission >>./outfiles/outfile02 
mini exit code = 13
bash exit code = 1
Test  63: ✅ ls <missing >>./test_files/invalid_permission >>./outfiles/outfile02 
Test  64: ❌ ls >>./test_files/invalid_permission >>./outfiles/outfile02 <missing 
mini exit code = 13
bash exit code = 1
Test  72: ❌ echo hi | echo bye >>./test_files/invalid_permission 
mini exit code = 13
bash exit code = 1
////////////////////////////////////////////////////////////////////////////

Test   1: ❌ unset HELLO= 
mini exit code = 0
bash exit code = 1
mini error = ()
bash error = ( not a valid identifier)
Test   2: ❌ unset  A- 
mini exit code = 0
bash exit code = 1
mini error = ()
bash error = ( not a valid identifier)
Test   4: ❌ unset  HELLO A- WORLD 
mini exit code = 0
bash exit code = 1
mini error = ()
bash error = ( not a valid identifier)
Test   5: ❌ export UNO=1 DOS-2 TRES=3 || env | grep TRES 
mini output = ()
bash output = (TRES=3)
mini exit code = 258
bash exit code = 0
mini error = ( syntax error near unexpected token `|')
bash error = ( not a valid identifier)
Test   6: ❌ export | sort | grep -v SHLVL | grep -v "declare -x _" | grep -v "PS.=" 
mini output = (declare -x COLORTERM="truecolor" declare -x COMMAND_MODE="unix2003" declare -x GIT_ASKPASS="/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh" declare -x HOME="/Users/aragragu" declare -x HOMEBREW_CACHE="/tmp/aragragu/Homebrew/Caches" declare -x HOMEBREW_TEMP="/tmp/aragragu/Homebrew/Temp" declare -x LANG="en_US.UTF-8" declare -x LESS="-R" declare -x LOGNAME="aragragu" declare -x LSCOLORS="Gxfxcxdxbxegedabagacad" declare -x LS_COLORS="di=1;36:ln=35:so=32:pi=33:ex=31:bd=34;46:cd=34;43:su=30;41:sg=30;46:tw=30;42:ow=30;43" declare -x LaunchInstanceID="ABFBF219-05B3-40B0-A9A1-2774DE5DF93E" declare -x MallocNanoZone="0" declare -x ORIGINAL_XDG_CURRENT_DESKTOP="undefined" declare -x PAGER="less" declare -x PATH="/Users/aragragu/.brew/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/munki:/Library/Apple/usr/bin" declare -x PWD="/Users/aragragu/Desktop/mini/minishell_tester" declare -x SECURITYSESSIONID="186a6" declare -x SHELL="/bin/zsh" declare -x SSH_AUTH_SOCK="/private/tmp/com.apple.launchd.oaaEWfMjCf/Listeners" declare -x TERM="xterm-256color" declare -x TERM_PROGRAM="vscode" declare -x TERM_PROGRAM_VERSION="1.89.1" declare -x TMPDIR="/var/folders/zz/zyxvpxvq6csfxvn_n000cls40034y9/T/" declare -x USER="aragragu" declare -x USER_ZDOTDIR="/Users/aragragu" declare -x VSCODE_GIT_ASKPASS_EXTRA_ARGS="" declare -x VSCODE_GIT_ASKPASS_MAIN="/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js" declare -x VSCODE_GIT_ASKPASS_NODE="/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)" declare -x VSCODE_GIT_IPC_HANDLE="/var/folders/zz/zyxvpxvq6csfxvn_n000cls40034y9/T/vscode-git-00bff74304.sock" declare -x VSCODE_INJECTION="1" declare -x XPC_FLAGS="0x0" declare -x XPC_SERVICE_NAME="0" declare -x ZDOTDIR="/Users/aragragu" declare -x ZSH="/Users/aragragu/.oh-my-zsh")
bash output = (declare -x COLORTERM="truecolor" declare -x COMMAND_MODE="unix2003" declare -x GIT_ASKPASS="/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass.sh" declare -x HOME="/Users/aragragu" declare -x HOMEBREW_CACHE="/tmp/aragragu/Homebrew/Caches" declare -x HOMEBREW_TEMP="/tmp/aragragu/Homebrew/Temp" declare -x LANG="en_US.UTF-8" declare -x LESS="-R" declare -x LOGNAME="aragragu" declare -x LSCOLORS="Gxfxcxdxbxegedabagacad" declare -x LS_COLORS="di=1;36:ln=35:so=32:pi=33:ex=31:bd=34;46:cd=34;43:su=30;41:sg=30;46:tw=30;42:ow=30;43" declare -x LaunchInstanceID="ABFBF219-05B3-40B0-A9A1-2774DE5DF93E" declare -x MallocNanoZone="0" declare -x OLDPWD declare -x ORIGINAL_XDG_CURRENT_DESKTOP="undefined" declare -x PAGER="less" declare -x PATH="/Users/aragragu/.brew/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/munki:/Library/Apple/usr/bin" declare -x PWD="/Users/aragragu/Desktop/mini/minishell_tester" declare -x SECURITYSESSIONID="186a6" declare -x SHELL="/bin/zsh" declare -x SSH_AUTH_SOCK="/private/tmp/com.apple.launchd.oaaEWfMjCf/Listeners" declare -x TERM="xterm-256color" declare -x TERM_PROGRAM="vscode" declare -x TERM_PROGRAM_VERSION="1.89.1" declare -x TMPDIR="/var/folders/zz/zyxvpxvq6csfxvn_n000cls40034y9/T/" declare -x USER="aragragu" declare -x USER_ZDOTDIR="/Users/aragragu" declare -x VSCODE_GIT_ASKPASS_EXTRA_ARGS="" declare -x VSCODE_GIT_ASKPASS_MAIN="/Applications/Visual Studio Code.app/Contents/Resources/app/extensions/git/dist/askpass-main.js" declare -x VSCODE_GIT_ASKPASS_NODE="/Applications/Visual Studio Code.app/Contents/Frameworks/Code Helper (Plugin).app/Contents/MacOS/Code Helper (Plugin)" declare -x VSCODE_GIT_IPC_HANDLE="/var/folders/zz/zyxvpxvq6csfxvn_n000cls40034y9/T/vscode-git-00bff74304.sock" declare -x VSCODE_INJECTION="1" declare -x XPC_FLAGS="0x0" declare -x XPC_SERVICE_NAME="0" declare -x ZDOTDIR="/Users/aragragu" declare -x ZSH="/Users/aragragu/.oh-my-zsh")
in here our minishell does not have OLDPWD but bash does
Test   9: ❌ exit -9223372036854775807 
mini exit code = 0
bash exit code = 1
Test  11: ❌ exit -9223372036854775809 
mini exit code = 0
bash exit code = 255
mini error = ()
bash error = ( numeric argument required)
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
➜ minishell💀$ unset PATH
➜ minishell💀$ echo $PATH

➜ minishell💀$ unset PATH
➜ minishell💀$ ls
minishell: ls: command not found
➜ minishell💀$ unset ""
`': not a valid identifier
➜ minishell💀$ unset INEXISTANT
➜ minishell💀$ unset PWD
➜ minishell💀$ env | grep PWD
minishell: grep: command not found
➜ minishell💀$ 
=================================================================
==38118==ERROR: AddressSanitizer: attempting double-free on 0x602000000350 in thread T0:
    #0 0x108cb32c6 in wrap_free+0xa6 (libclang_rt.asan_osx_dynamic.dylib:x86_64h+0x492c6)
    #1 0x108bc1393 in free_garbage token4.c:84
    #2 0x108bc1849 in read_input main.c:61
    #3 0x108bc190c in main main.c:68
    #4 0x7fff6ae3dcc8 in start+0x0 (libdyld.dylib:x86_64+0x1acc8)

0x602000000350 is located 0 bytes inside of 5-byte region [0x602000000350,0x602000000355)
freed by thread T0 here:
    #0 0x108cb32c6 in wrap_free+0xa6 (libclang_rt.asan_osx_dynamic.dylib:x86_64h+0x492c6)
    #1 0x108bda2ef in norm_unset ft_unset.c:21
    #2 0x108bda58e in norm_unset_3 ft_unset.c:38
    #3 0x108bdb059 in ft_unset ft_unset.c:63
    #4 0x108be231f in ft_builtins ft_utils4.c:39
    #5 0x108be1195 in execution ft_excu2.c:27
    #6 0x108bc1687 in read_input_loop main.c:46
    #7 0x108bc1836 in read_input main.c:60
    #8 0x108bc190c in main main.c:68
    #9 0x7fff6ae3dcc8 in start+0x0 (libdyld.dylib:x86_64+0x1acc8)
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
➜ minishell💀$ unset PWD 
➜ minishell💀$ env | grep PWD
OLDPWD=/Users/aragragu/Desktop/mini
////////////////////////////////////////////////////////////////////////////
➜ minishell💀$ unset HOLA9
➜ minishell💀$ echo $?
127
////////////////////////////////////////////////////////////////////////////
➜ minishell💀$ unset HOL?A
➜ minishell💀$ echo $?
0
➜ minishell💀$ unset HOLA HOL?A
➜ minishell💀$ echo $?
0
➜ minishell💀$ unset HOL?A HOLA
➜ minishell💀$ unset HOL?A HOL.A
➜ minishell💀$ unset HOLA=
➜ minishell💀$ unset HOL\\\\A
➜ minishell💀$ unset HOL;A
➜ minishell💀$ unset HOL.A
➜ minishell💀$ unset HOL+A
➜ minishell💀$ unset HOL=A
➜ minishell💀$ unset HOL{A
➜ minishell💀$ unset HOL}A
➜ minishell💀$ unset HOL-A
➜ minishell💀$ unset HOL*A
➜ minishell💀$ unset HOL#A
➜ minishell💀$ unset HOL#A
➜ minishell💀$ unset HOL@
➜ minishell💀$ unset HOL!A
➜ minishell💀$ unset HOL^A
➜ minishell💀$ unset HOL\~A

////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
➜ minishell💀$ unset PATH
➜ minishell💀$ echo $PATH

➜ minishell💀$ 
=================================================================
==44579==ERROR: AddressSanitizer: attempting double-free on 0x602000000350 in thread T0:
    #0 0x1001392c6 in wrap_free+0xa6 (libclang_rt.asan_osx_dynamic.dylib:x86_64h+0x492c6)
    #1 0x100045393 in free_garbage token4.c:84
    #2 0x100045849 in read_input main.c:61
    #3 0x10004590c in main main.c:68
    #4 0x7fff6ae3dcc8 in start+0x0 (libdyld.dylib:x86_64+0x1acc8)

0x602000000350 is located 0 bytes inside of 5-byte region [0x602000000350,0x602000000355)
freed by thread T0 here:
    #0 0x1001392c6 in wrap_free+0xa6 (libclang_rt.asan_osx_dynamic.dylib:x86_64h+0x492c6)
    #1 0x10005e2ef in norm_unset ft_unset.c:21
    #2 0x10005e58e in norm_unset_3 ft_unset.c:38
    #3 0x10005f059 in ft_unset ft_unset.c:63
    #4 0x10006631f in ft_builtins ft_utils4.c:39
    #5 0x100065195 in execution ft_excu2.c:27
    #6 0x100045687 in read_input_loop main.c:46
    #7 0x100045836 in read_input main.c:60
    #8 0x10004590c in main main.c:68
    #9 0x7fff6ae3dcc8 in start+0x0 (libdyld.dylib:x86_64+0x1acc8)
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
➜ minishell💀$ history
minishell: history: command not found
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
➜ minishell💀$ cd -
-: No such file or directory
////////////////////////////////////////////////////////////////////////////
➜ minishell💀$ unset HOME
➜ minishell💀$ export HOME=
➜ minishell💀$ cd
cd::No such file or directory
////////////////////////////////////////////////////////////////////////////
➜ minishell💀$ cd minishell Docs crashtest.c
minishell: Not a directory
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
➜ minishell💀$ pwd
/Users/aragragu/Desktop/mini
➜ minishell💀$ cd ~
minishell: cd: HOME not set
➜ minishell💀$ 
➜ minishell💀$ 
=================================================================
==55665==ERROR: AddressSanitizer: attempting double-free on 0x603000001e40 in thread T0:
    #0 0x1020f92c6 in wrap_free+0xa6 (libclang_rt.asan_osx_dynamic.dylib:x86_64h+0x492c6)
    #1 0x102007393 in free_garbage token4.c:84
    #2 0x102007849 in read_input main.c:61
    #3 0x10200790c in main main.c:68
    #4 0x7fff6ae3dcc8 in start+0x0 (libdyld.dylib:x86_64+0x1acc8)

0x603000001e40 is located 0 bytes inside of 29-byte region [0x603000001e40,0x603000001e5d)
freed by thread T0 here:
    #0 0x1020f92c6 in wrap_free+0xa6 (libclang_rt.asan_osx_dynamic.dylib:x86_64h+0x492c6)
    #1 0x10201cbd7 in pwd_upd_old ft_cd.c:25
    #2 0x10201d603 in ft_cd ft_cd.c:105
    #3 0x1020282f6 in ft_builtins ft_utils4.c:37
    #4 0x102027195 in execution ft_excu2.c:27
    #5 0x102007687 in read_input_loop main.c:46
    #6 0x102007836 in read_input main.c:60
    #7 0x10200790c in main main.c:68
    #8 0x7fff6ae3dcc8 in start+0x0 (libdyld.dylib:x86_64+0x1acc8)
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
➜ minishell💀$ env
PWD=/Users/aragragu/Desktop/mini
SHLVL=1
_=/usr/bin/env
➜ minishell💀$ ls
?????                   Makefile                allo.tldr               execu                   ft_printf               minishell               minishell.h             minishell_tester        parsing
➜ minishell💀$ unset PATH
➜ minishell💀$ ls
minishell: ls: command not found
➜ minishell💀$ cd /bin/                                                                                                                                                              
➜ minishell💀$ ls
minishell: ls: command not found
➜ minishell💀$ 
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
minishell💀$ env | grep PWD
PWD=/Users/aragragu/Desktop/mini
OLDPWD=/Users/aragragu/Desktop/mini
➜ minishell💀$ 
bash-3.2$ env | grep PWD
PWD=/Users/aragragu/Desktop/mini/a/b
bash-3.2$ 
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
leaks in heredoc delimiters

while true; do
    valgrind --leak-check=full --track-origins=yes --log-file=valgrind_output --trace-children=yes --pid=$(pgrep minishell)
    sleep 2
    clear
  done
  

